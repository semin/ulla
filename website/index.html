<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <link rel="stylesheet" href="stylesheets/screen.css" type="text/css" media="screen" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
      ulla: a program for calculating environment-specific substitution tables
  </title>
  <script src="javascripts/rounded_corners_lite.inc.js" type="text/javascript"></script>
<style>

</style>
  <script type="text/javascript">
    window.onload = function() {
      settings = {
          tl: { radius: 10 },
          tr: { radius: 10 },
          bl: { radius: 10 },
          br: { radius: 10 },
          antiAlias: true,
          autoPad: true,
          validTags: ["div"]
      }
      var versionBox = new curvyCorners(settings, document.getElementById("version"));
      versionBox.applyCornersToAll();
    }
  </script>
</head>
<body>
<div id="main">

    <h1>ulla: a program for calculating environment-specific substitution tables</h1>
    <div class="sidebar">
      <div id="version" class="clickable" onclick='document.location = "http://rubyforge.org/projects/ulla"; return false'>
        <p>Get Version</p>
        <a href="http://rubyforge.org/projects/ulla" class="numbers">0.9.3</a>
      </div>
    </div>
    <h2>Description</h2>
<p>&#8216;ulla&#8217; is a program for calculating environment-specific substitution tables from user providing environmental class definitions and sequence alignments with the annotations of the environment classes.</p>
<h2>Features</h2>
<ul>
	<li>Environment-specific substitution table generation based on user providing environmental class definition</li>
	<li>Entropy-based smoothing procedures to cope with sparse data problem</li>
	<li><span class="caps">BLOSUM</span>-like weighting procedures using <span class="caps">PID</span> threshold</li>
	<li>Both unidirectional and bidirectional substitution matirces can be generated</li>
</ul>
<h2>Installation</h2>
<pre>
~user $ sudo gem install ulla
</pre>
<h2>Requirements</h2>
<ul>
	<li>ruby 1.8.7 or above (http://www.ruby-lang.org)</li>
	<li>rubygems 1.2.0 or above (http://rubyforge.org/projects/rubygems/)</li>
</ul>
<p>Following RubyGems will be automatically installed if you have rubygems installed on your machine</p>
<ul>
	<li>narray (http://narray.rubyforge.org/)</li>
	<li>facets (http://facets.rubyforge.org/)</li>
	<li>bio (http://bioruby.open-bio.org/)</li>
	<li>simple_memoize (http://github.com/JackDanger/simple_memoize/tree/master)</li>
</ul>
<h2>Basic Usage</h2>
<p>It&#8217;s pretty much the same as Kenji&#8217;s subst (http://www-cryst.bioc.cam.ac.uk/~kenji/subst/), so in most cases, you can swap &#8216;subst&#8217; with &#8216;ulla&#8217;.</p>
<pre>
~user $ ulla -l TEMLIST-file -c classdef.dat
    or
~user $ ulla -l TEM-file -c classdef.dat
</pre>
<h2>Options</h2>
<pre>
--tem-file (-f) FILE: a tem file
--tem-list (-l) FILE: a list for tem files
--classdef (-c) FILE: a file for the defintion of environments (default: 'classdef.dat')
--outfile (-o) FILE: output filename (default 'allmat.dat')
--weight (-w) INTEGER: clustering level (PID) for the BLOSUM-like weighting (default: 60)
--noweight: calculate substitution count with no weights
--smooth (-s) INTEGER:
    0 for partial smoothing (default)
    1 for full smoothing
--p1smooth: perform smoothing for p1 probability calculation when partial smoothing
--nosmooth: perform no smoothing operation
--cys (-y) INTEGER:
    0 for using C and J only for structure (default)
    1 for both structure and sequence
    2 for using only C for both (must be set when you have no 'disulphide' or 'disulfide' annotation in templates)
--output INTEGER:
    0 for raw count (no smoothing performed)
    1 for probabilities
    2 for log odds ratios (default)
--noroundoff: do not round off log odds ratio
--scale INTEGER: log odds ratio matrices in 1/n bit units (default 3)
--sigma DOUBLE: change the sigma value for smoothing (default 5.0)
--autosigma: automatically adjust the sigma value for smoothing
--add DOUBLE: add this value to raw count when deriving log odds ratios without smoothing (default 1/#classes)
--penv: use environment-dependent frequencies for log odds ratio calculation (default false) (NOT implemented yet!!!)
--pidmin DOUBLE: count substitutions only for pairs with PID equal to or greater than this value (default none)
--pidmax DOUBLE: count substitutions only for pairs with PID smaller than this value (default none)
--verbose (-v) INTEGER
    0 for ERROR level
    1 for WARN or above level (default)
    2 for INFO or above level
    3 for DEBUG or above level
--version: print version
--help (-h): show help
</pre>
<h2>Usage</h2>
<h4>1. Prepare an environmental class definition file.</h4>
<pre>
~user $ cat classdef.dat
#
# name of feature (string); values adopted in .tem file (string); class labels assigned for each value (string);\
# constrained or not (T or F); silent (used as masks)? (T or F)
#
secondary structure and phi angle;HEPC;HEPC;T;F
solvent accessibility;TF;Aa;F;F
hydrogen bond to other sidechain/heterogen;TF;Ss;F;F
hydrogen bond to mainchain CO;TF;Oo;F;F
hydrogen bond to mainchain NH;TF;Nn;F;F
</pre>
<h4>2. Prepare structural alignments and their annotations of above environmental classes in <span class="caps">PIR</span> format.</h4>
<pre>
~user $ cat sample1.tem
&gt;P1;1mnma
sequence
QKERRKIEIKFIENKTRRHVTFSKRKHGIMKKAFELSVLTGTQVLLLVVSETGLVYTFSTPKFEPIVTQQEGRNL
IQACLNAPDD*
&gt;P1;1egwa
sequence
--GRKKIQITRIMDERNRQVTFTKRKFGLMKKAYELSVLCDCEIALIIFNSSNKLFQYASTDMDKVLLKYTEY--
----------*
&gt;P1;1mnma
secondary structure and phi angle
CPCCCCCCCCCCCCHHHHHHHHHHHHHHHHHHHHHHHHHHPCCCEEEEECCCPCEEEEECCCCCHHHHCHHHHHH
HHHHHCCCCP*
&gt;P1;1egwa
secondary structure and phi angle
--CCCCCCCCCCCCHHHHHHHHHHHHHHHHHHHHHHHHHCPCCCEEEEECCCPCEEEEECCCHHHHHHHHHHC--
----------*
&gt;P1;1mnma
solvent accessibility
TTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTFTTTTTTTTTTTTTTTT
TTTTTTTTTT*
&gt;P1;1egwa
solvent accessibility
--TTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTFTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTT--
----------*
... 
</pre>
<h4>3. When you have two or more alignment files, you should make a separate file containing all the paths for the alignment files.</h4>
<pre>
~user $ ls -1 *.tem &gt; TEMLIST
~user $ cat TEMLIST
sample1.tem
sample2.tem
...
</pre>
<h4>4. To produce substitution count matrices, type</h4>
<pre>
~user $ ulla -l TEMLIST --output 0 -o substcount.mat
</pre>
<h4>5. To produce substitution probability matrices, type</h4>
<pre>
~user $ ulla -l TEMLIST --output 1 -o substprob.mat
</pre>
<h4>6. To produce log odds ratio matrices, type</h4>
<pre>
~user $ ulla -l TEMLIST --output 2 -o substlogo.mat
</pre>
<h4>7. To produce substitution data only from the sequence pairs within a given <span class="caps">PID</span> range, type (if you don&#8217;t provide any name for output, &#8216;allmat.dat&#8217; will be used.)</h4>
<pre>
~user $ ulla -l TEMLIST --pidmin 60 --pidmax 80 --output 1
</pre>
<h4>8. To change the clustering level (default 60), type</h4>
<pre>
~user $ ulla -l TEMLIST --weight 80 --output 2
</pre>
<h4>9. In case any positions are masked with the character &#8216;X&#8217; in any environmental feature will be excluded from the calculation of substitution counts.</h4>
<h2>Repository</h2>
<p>You can download a pre-built RubyGems package from</p>
<ul>
	<li>rubyforge: <a href="http://rubyforge.org/projects/ulla">http://rubyforge.org/projects/ulla</a></li>
</ul>
<p>or, You can fetch the source from</p>
<ul>
	<li>github: <a href="http://github.com/semin/ulla/tree/master">http://github.com/semin/ulla/tree/master</a></li>
</ul>
<h2>Contact</h2>
<p>Comments are welcome, please send an email to me (seminlee at gmail dot com).</p>
<h2>License</h2>
<p>(The <span class="caps">MIT</span> License)</p>
<p>Copyright &#169; 2008 Semin Lee</p>
<p>Permission is hereby granted, free of charge, to any person obtaining<br />
a copy of this software and associated documentation files (the<br />
&#8216;Software&#8217;), to deal in the Software without restriction, including<br />
without limitation the rights to use, copy, modify, merge, publish,<br />
distribute, sublicense, and/or sell copies of the Software, and to<br />
permit persons to whom the Software is furnished to do so, subject to<br />
the following conditions:</p>
<p>The above copyright notice and this permission notice shall be<br />
included in all copies or substantial portions of the Software.</p>
<p><span class="caps">THE</span> <span class="caps">SOFTWARE</span> IS <span class="caps">PROVIDED</span> &#8216;AS IS&#8217;, <span class="caps">WITHOUT</span> <span class="caps">WARRANTY</span> OF <span class="caps">ANY</span> <span class="caps">KIND</span>,<br />
<span class="caps">EXPRESS</span> OR <span class="caps">IMPLIED</span>, <span class="caps">INCLUDING</span> <span class="caps">BUT</span> <span class="caps">NOT</span> <span class="caps">LIMITED</span> TO <span class="caps">THE</span> <span class="caps">WARRANTIES</span> OF<br />
<span class="caps">MERCHANTABILITY</span>, <span class="caps">FITNESS</span> <span class="caps">FOR</span> A <span class="caps">PARTICULAR</span> <span class="caps">PURPOSE</span> <span class="caps">AND</span> <span class="caps">NONINFRINGEMENT</span>.<br />
IN NO <span class="caps">EVENT</span> <span class="caps">SHALL</span> <span class="caps">THE</span> <span class="caps">AUTHORS</span> OR <span class="caps">COPYRIGHT</span> <span class="caps">HOLDERS</span> BE <span class="caps">LIABLE</span> <span class="caps">FOR</span> <span class="caps">ANY</span><br />
<span class="caps">CLAIM</span>, <span class="caps">DAMAGES</span> OR <span class="caps">OTHER</span> <span class="caps">LIABILITY</span>, <span class="caps">WHETHER</span> IN AN <span class="caps">ACTION</span> OF <span class="caps">CONTRACT</span>,<br />
<span class="caps">TORT</span> OR <span class="caps">OTHERWISE</span>, <span class="caps">ARISING</span> <span class="caps">FROM</span>, <span class="caps">OUT</span> OF OR IN <span class="caps">CONNECTION</span> <span class="caps">WITH</span> <span class="caps">THE</span><br />
<span class="caps">SOFTWARE</span> OR <span class="caps">THE</span> <span class="caps">USE</span> OR <span class="caps">OTHER</span> <span class="caps">DEALINGS</span> IN <span class="caps">THE</span> <span class="caps">SOFTWARE</span>.</p>
    <p class="coda">
      Semin Lee, 23rd February 2009<br>
      Theme extended from <a href="http://rb2js.rubyforge.org/">Paul Battley</a>
    </p>
</div>

<!-- insert site tracking codes here, like Google Urchin -->
<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  var pageTracker = _gat._getTracker("UA-6291956-1");
  pageTracker._trackPageview();
</script>
</body>
</html>
