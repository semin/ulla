<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <link rel="stylesheet" href="stylesheets/screen.css" type="text/css" media="screen" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
      h1.egor: Esst GeneratOR, a program for calculating environment-specific substitution tables
  </title>
  <script src="javascripts/rounded_corners_lite.inc.js" type="text/javascript"></script>
<style>

</style>
  <script type="text/javascript">
    window.onload = function() {
      settings = {
          tl: { radius: 10 },
          tr: { radius: 10 },
          bl: { radius: 10 },
          br: { radius: 10 },
          antiAlias: true,
          autoPad: true,
          validTags: ["div"]
      }
      var versionBox = new curvyCorners(settings, document.getElementById("version"));
      versionBox.applyCornersToAll();
    }
  </script>
</head>
<body>
<div id="main">

    <h1>h1.egor: Esst GeneratOR, a program for calculating environment-specific substitution tables</h1>
    <div class="sidebar">
      <div id="version" class="clickable" onclick='document.location = "http://rubyforge.org/projects/egor"; return false'>
        <p>Get Version</p>
        <a href="http://rubyforge.org/projects/egor" class="numbers">0.0.5</a>
      </div>
    </div>
    <h2>Description</h2>
<p>&#8216;egor&#8217; is a program for calculating environment-specific substitution tables from user providing environmental class definitions and sequence alignments with the annotations of the environment classes.</p>
<h2>Features</h2>
<ul>
	<li>Environment-specific substitution table generation based on user providing environmental class definition</li>
	<li>Entropy-based smoothing procedures to cope with sparse data problem</li>
	<li><span class="caps">BLOSUM</span>-like weighting procedures using <span class="caps">PID</span> threshold</li>
	<li>Both unidirectional and bidirectional substitution matirces can be generated (<span class="caps">NOT</span> <span class="caps">IMPLEMENTED</span> <span class="caps">YET</span>!!!)</li>
</ul>
<h2>Installation</h2>
<p><pre class='syntax'>~<span class="ident">user</span> <span class="global">$ </span><span class="ident">sudo</span> <span class="ident">gem</span> <span class="ident">install</span> <span class="ident">egor</span></pre></p>
<h2>Requirements</h2>
<ul>
	<li>ruby 1.8.7 or above (http://www.ruby-lang.org)</li>
	<li>rubygems 1.2.0 or above (http://rubyforge.org/projects/rubygems/)</li>
</ul>
<p>Following RubyGems will be automatically installed if you have rubygems installed on your machine</p>
<ul>
	<li>narray (http://narray.rubyforge.org/)</li>
	<li>facets (http://facets.rubyforge.org/)</li>
	<li>bio (http://bioruby.open-bio.org/)</li>
	<li>simple_memoize (http://github.com/JackDanger/simple_memoize/tree/master)</li>
</ul>
<h2>Basin Usage</h2>
<p>It&#8217;s pretty much the same as Kenji&#8217;s subst (http://www-cryst.bioc.cam.ac.uk/~kenji/subst/), so in most cases, you can swap &#8216;subst&#8217; with &#8216;egor&#8217;.</p>
<pre>~user $ egor -l TEMLIST-file -c classdef.dat</pre>
or
<pre>~user $ egor -l TEM-file -c classdef.dat</pre>
<h2>Options<br />
    &#8212;tem-file (-f) <span class="caps">FILE</span>: a tem file<br />
    &#8212;tem-list (-l) <span class="caps">FILE</span>: a list for tem files<br />
    &#8212;classdef (-c) <span class="caps">FILE</span>: a file for the defintion of environments (default: &#8216;classdef.dat&#8217;)<br />
    &#8212;outfile (-o) <span class="caps">FILE</span>: output filename (default &#8216;allmat.dat&#8217;)<br />
    &#8212;weight (-w) <span class="caps">INTEGER</span>: clustering level (<span class="caps">PID</span>) for the <span class="caps">BLOSUM</span>-like weighting (default: 60)<br />
    &#8212;noweight: calculate substitution count with no weights<br />
    &#8212;smooth (-s) <span class="caps">INTEGER</span>:<br />
        0 for partial smoothing (default)<br />
        1 for full smoothing<br />
    &#8212;p1smooth: perform smoothing for p1 probability calculation when partial smoothing<br />
    &#8212;nosmooth: perform no smoothing operation<br />
    &#8212;cys (-y) <span class="caps">INTEGER</span>:<br />
        0 for using C and J only for structure (default)<br />
        1 for both structure and sequence<br />
        2 for using only C for both (must be set when you have no &#8216;disulphide&#8217; or &#8216;disulfide&#8217; annotation in templates)<br />
    &#8212;output <span class="caps">INTEGER</span>:<br />
        0 for raw count (no smoothing performed)<br />
        1 for probabilities<br />
        2 for log odds ratios (default)<br />
    &#8212;noroundoff: do not round off log odds ratio<br />
    &#8212;scale <span class="caps">INTEGER</span>: log odds ratio matrices in 1/n bit units (default 3)<br />
    &#8212;sigma <span class="caps">DOUBLE</span>: change the sigma value for smoothing (default 5.0)<br />
    &#8212;autosigma: automatically adjust the sigma value for smoothing<br />
    &#8212;add <span class="caps">DOUBLE</span>: add this value to raw count when deriving log odds ratios without smoothing (default 1/#classes)<br />
    &#8212;penv: use environment-dependent frequencies for log odds ratio calculation (default false) (<span class="caps">NOT</span> implemented yet!!!)<br />
    &#8212;pidmin <span class="caps">DOUBLE</span>: count substitutions only for pairs with <span class="caps">PID</span> equal to or greater than this value (default none)<br />
    &#8212;pidmax <span class="caps">DOUBLE</span>: count substitutions only for pairs with <span class="caps">PID</span> smaller than this value (default none)<br />
    &#8212;verbose (-v) <span class="caps">INTEGER</span><br />
        0 for <span class="caps">ERROR</span> level<br />
        1 for <span class="caps">WARN</span> or above level (default)<br />
        2 for <span class="caps">INFO</span> or above level<br />
        3 for <span class="caps">DEBUG</span> or above level<br />
    &#8212;version: print version<br />
    &#8212;help (-h): show help</h2>
<h2>Usage</h2>
<h3>1. Prepare an environmental class definition file.</h3>
~user $ cat classdef.dat
#
# name of feature (string); values adopted in .tem file (string); class labels assigned for each value (string);\
# constrained or not (T or F); silent (used as masks)? (T or F)
#
secondary structure and phi angle;<span class="caps">HEPC</span>;<span class="caps">HEPC</span>;T;F
solvent accessibility;TF;Aa;F;F
hydrogen bond to other sidechain/heterogen;TF;Ss;F;F
hydrogen bond to mainchain CO;TF;Oo;F;F
hydrogen bond to mainchain NH;TF;Nn;F;F
<h3>2. Prepare structural alignments and their annotations of above environmental classes in <span class="caps">PIR</span> format.</h3>
~user $ cat sample1.tem
&gt;P1;1mnma
sequence
<span class="caps">QKERRKIEIKFIENKTRRHVTFSKRKHGIMKKAFELSVLTGTQVLLLVVSETGLVYTFSTPKFEPIVTQQEGRNL</span>
IQACLNAPDD*
&gt;P1;1egwa
sequence
&#8212;<span class="caps">GRKKIQITRIMDERNRQVTFTKRKFGLMKKAYELSVLCDCEIALIIFNSSNKLFQYASTDMDKVLLKYTEY</span>&#8212;
&#8212;&#8212;&#8212;&#8212;&#8212;*
&gt;P1;1mnma
secondary structure and phi angle
<span class="caps">CPCCCCCCCCCCCCHHHHHHHHHHHHHHHHHHHHHHHHHHPCCCEEEEECCCPCEEEEECCCCCHHHHCHHHHHH</span>
HHHHHCCCCP*
&gt;P1;1egwa
secondary structure and phi angle
&#8212;<span class="caps">CCCCCCCCCCCCHHHHHHHHHHHHHHHHHHHHHHHHHCPCCCEEEEECCCPCEEEEECCCHHHHHHHHHHC</span>&#8212;
&#8212;&#8212;&#8212;&#8212;&#8212;*
&gt;P1;1mnma
solvent accessibility
<span class="caps">TTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTFTTTTTTTTTTTTTTTT</span>
TTTTTTTTTT*
&gt;P1;1egwa
solvent accessibility
&#8212;<span class="caps">TTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTFTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTT</span>&#8212;
&#8212;&#8212;&#8212;&#8212;&#8212;*
&#8230;
<h3>3. When you have two or more alignment files, you should make a separate file containing all the paths for the alignment files.</h3>
~user $ cat -1 *.tem &gt; <span class="caps">TEMLIST</span>
~user $ cat <span class="caps">TEMLIST</span>
sample1.tem
sample2.tem
&#8230;
<h3>4. To produce substitution count matrices, type</h3>
~user $ egor -l <span class="caps">TEMLIST</span> &#8212;output 0 -o substcount.mat
<h3>5. To produce substitution probability matrices, type</h3>
~user $ egor -l <span class="caps">TEMLIST</span> &#8212;output 1 -o substprob.mat
<h3>6. To produce log odds ratio matrices, type</h3>
~user $ egor -l <span class="caps">TEMLIST</span> &#8212;output 2 -o substlogo.mat
<h3>7. To produce substitution data only from the sequence pairs within a given <span class="caps">PID</span> range, type (if you don&#8217;t provide any name for output, &#8216;allmat.dat&#8217; will be used.)</h3>
~user $ egor -l <span class="caps">TEMLIST</span> &#8212;pidmin 60 &#8212;pidmax 80 &#8212;output 1
<h3>8. To change the clustering level (default 60), type</h3>
~user $ egor -l <span class="caps">TEMLIST</span> &#8212;weight 80 &#8212;output 2
<h3>9. In case any positions masked with the character &#8216;X&#8217; in any environmental feature will be excluded from the calculation of substitution counts.</h3>
<h2>Repository</h2>
<p>You can download a pre-built RubyGems package from</p>
<ul>
	<li>rubyforge: <a href="http://rubyforge.org/projects/egor">http://rubyforge.org/projects/egor</a></li>
</ul>
<p>or, You can fetch the source from</p>
<ul>
	<li>github: <a href="http://github.com/semin/egor/tree/master">http://github.com/semin/egor/tree/master</a></li>
</ul>
<h2>Contact</h2>
<p>Comments are welcome, please send an email to me (seminlee at gmail dot com).</p>
<h2>License</h2>
<p>(The <span class="caps">MIT</span> License)</p>
<p>Copyright &#169; 2008 Semin Lee</p>
<p>Permission is hereby granted, free of charge, to any person obtaining<br />
a copy of this software and associated documentation files (the<br />
&#8216;Software&#8217;), to deal in the Software without restriction, including<br />
without limitation the rights to use, copy, modify, merge, publish,<br />
distribute, sublicense, and/or sell copies of the Software, and to<br />
permit persons to whom the Software is furnished to do so, subject to<br />
the following conditions:</p>
<p>The above copyright notice and this permission notice shall be<br />
included in all copies or substantial portions of the Software.</p>
<p><span class="caps">THE</span> <span class="caps">SOFTWARE</span> IS <span class="caps">PROVIDED</span> &#8216;AS IS&#8217;, <span class="caps">WITHOUT</span> <span class="caps">WARRANTY</span> OF <span class="caps">ANY</span> <span class="caps">KIND</span>,<br />
<span class="caps">EXPRESS</span> OR <span class="caps">IMPLIED</span>, <span class="caps">INCLUDING</span> <span class="caps">BUT</span> <span class="caps">NOT</span> <span class="caps">LIMITED</span> TO <span class="caps">THE</span> <span class="caps">WARRANTIES</span> OF<br />
<span class="caps">MERCHANTABILITY</span>, <span class="caps">FITNESS</span> <span class="caps">FOR</span> A <span class="caps">PARTICULAR</span> <span class="caps">PURPOSE</span> <span class="caps">AND</span> <span class="caps">NONINFRINGEMENT</span>.<br />
IN NO <span class="caps">EVENT</span> <span class="caps">SHALL</span> <span class="caps">THE</span> <span class="caps">AUTHORS</span> OR <span class="caps">COPYRIGHT</span> <span class="caps">HOLDERS</span> BE <span class="caps">LIABLE</span> <span class="caps">FOR</span> <span class="caps">ANY</span><br />
<span class="caps">CLAIM</span>, <span class="caps">DAMAGES</span> OR <span class="caps">OTHER</span> <span class="caps">LIABILITY</span>, <span class="caps">WHETHER</span> IN AN <span class="caps">ACTION</span> OF <span class="caps">CONTRACT</span>,<br />
<span class="caps">TORT</span> OR <span class="caps">OTHERWISE</span>, <span class="caps">ARISING</span> <span class="caps">FROM</span>, <span class="caps">OUT</span> OF OR IN <span class="caps">CONNECTION</span> <span class="caps">WITH</span> <span class="caps">THE</span><br />
<span class="caps">SOFTWARE</span> OR <span class="caps">THE</span> <span class="caps">USE</span> OR <span class="caps">OTHER</span> <span class="caps">DEALINGS</span> IN <span class="caps">THE</span> <span class="caps">SOFTWARE</span>.</p>
    <p class="coda">
      Semin Lee, 4th February 2009<br>
      Theme extended from <a href="http://rb2js.rubyforge.org/">Paul Battley</a>
    </p>
</div>

<!-- insert site tracking codes here, like Google Urchin -->
<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  var pageTracker = _gat._getTracker("UA-6291956-1");
  pageTracker._trackPageview();
</script>
</body>
</html>
